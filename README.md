# POS收银系统

## 功能特性

- 商品管理（添加、查询、修改、下架）
- 购买功能（支持批量购买、库存管理）
- 购物记录管理（自动记录每次购买）
- JSON文件持久化存储
- 用户友好的控制台界面

## JSON持久化

系统使用Gson库将商品数据和购物记录持久化到JSON文件中：

### 数据文件
- 商品数据：`goods_data.json`
- 购物记录：`purchase_records.json`
- 位置：项目根目录

### 商品数据格式
```json
{
  "goods": [
    {
      "id": 1,
      "goodsName": "商品名称",
      "goodsNum": 库存数量,
      "goodsPrice": 价格
    }
  ],
  "googsIndex": 当前商品数量,
  "goodsTotal": 最大商品容量
}
```

### 购物记录格式
```json
[
  {
    "recordId": "PUR1703123456789",
    "purchaseTime": "2024-01-15T14:30:25",
    "items": [
      {
        "goodsId": 1,
        "goodsName": "苹果",
        "quantity": 3,
        "unitPrice": 5.50,
        "subtotal": 16.50
      }
    ],
    "totalAmount": 22.90
  }
]
```

## 购物记录功能

### 自动记录
- 每次完成购买后自动生成购物记录
- 记录包含购买时间、商品详情、总金额
- 自动分配唯一的记录ID

### 查看记录
- 查看所有购物记录
- 查看最近10条记录
- 详细显示每条记录的商品信息

### 数据持久化
- 购物记录自动保存到JSON文件
- 系统启动时自动加载历史记录
- 支持大量记录的存储和查询

## 自动保存
系统在以下操作后自动保存数据：
- 添加商品
- 修改商品
- 删除商品
- 购买商品（同时保存购物记录）

## 自动加载
系统启动时自动从JSON文件加载数据，如果文件不存在则使用空数据初始化。

## 运行要求

- Java 8+
- Maven（用于依赖管理）
- Gson 2.10.1（通过Maven自动下载）

## 编译和运行

```bash
# 编译项目
mvn compile

# 运行项目
mvn exec:java -Dexec.mainClass="com.qcby.pos.Main"
```

## 使用说明

1. 启动程序后，系统会自动加载已保存的商品数据和购物记录
2. 通过菜单选择相应功能：
   - 1-4: 商品管理功能
   - 5: 购买商品（自动生成购物记录）
   - 6: 查看购物记录
   - 7: 退出系统
3. 所有数据修改会自动保存到JSON文件
4. 程序退出时会确保数据完整保存